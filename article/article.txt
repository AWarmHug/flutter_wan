
https://bbs.csdn.net/topics/391914441
https://www.zhihu.com/question/307298908/answer/569471390
https://www.jianshu.com/p/d6b67f8cd4b0
https://wenku.baidu.com/view/8452e9686ad97f192279168884868762caaebb9e.html
https://wenku.baidu.com/view/f24e6fcc51e79b896802268b.html?fr=income8-doc-search
https://max.book118.com/html/2019/0413/5002340320002024.shtm

Flutter架构图
https://blog.csdn.net/weixin_42600398/article/details/104089283

随着社会经济的不断发展，互联网逐步走进人们的生活，尤其是近十年的移动互联网的发展，让人们的生活发生了翻天覆地的变化。
如今，在街头我们可以看到，无论老人小孩都是人手一部智能手机，生活中，我们使用智能手机沟通联系，娱乐购物，这些都彰显了科技给生活带来的便利。
在这些便捷服务的背后都离不开相应的操作系统和软件应用的支持，随着时代的发展，移动端的操作系统从早期的Symbian，发展至如今的Android和iOS,
移动操作系统在不断地发展和完善，作为操作系统的上层应用开发技术也发生着日新月异的变化。 

在原先的移动端软件开发中，由于需要面向Android和iOS两大操作系统，为此我们不得不开发两个应用，在此情况下需要付出的人力和学习成本极高，
并且由于操作系统的不同导致呈现在用户面前的体验也不同，还需要进行各种适配操作。面对这些情况，众多科技公司推出了自家的跨平台框架，
如：阿里巴巴的Weex、Facebook的React Native和Google的Flutter等等，这些框架各有各的优点，结合开发效率，绘制性能和热度趋势，我们
讲设计一款基于Flutter的资讯App。

App的设计开发主要基于Android Studio开发平台和Dart为核心的编程语言，根据手机用户对App应用的操作需求来进行设计，主要有主页，资讯，
个人主页，登录等功能，其中主页有文章，公众号，项目等子模块，资讯模块提供了视频、文章、和热榜模块，帮助用户获取
最新的网络资讯，个人主页模块包括用户收藏的文章信息，登录入口等功能。App采用Material Design交互设计，界面整体风格统一，操作流畅，
人性化的交互。

跨平台移动端开发演进
移动端的原生开发一直以来面临着动态化（热修复）、UI一致性和两端开发成本的问题，针对这些问题，诞生了一些跨平台的动态化框架，根据这些框架的原理，
主要分为以下三类：
1、Hybrid技术，即通过WebView呈现H5网页，搭配原生支持（Cordova、Ionic）
2、JS+原生技术，使用JavaScript搭桥，直接调用原生控件来渲染UI（React Native、Weex）
3、自绘引擎技术，使用自绘引擎渲染UI，封装框架与原生交互（Qt for mobile、Flutter）

Hybrid技术简介
这类框架主要原理就是直接编写网页代码，通过原生的网页控件（Android的WebView和iOS的WKWebView）来直接加载网页内容，App本身只是一个壳，
围绕着WebView，通过JavaScript接口桥接原生功能。网页技术经过多年的发展，其技术社区十分活跃，相应生态资源丰富，这也是目前最常用最成熟的
跨端解决方案，但是由于手机性能的限制，并且所有的功能都承载于WebView，使得Web在复杂的UI页面或动画的情况下变得不堪重负，和原生应用相比，
往往体验有所欠缺。

JS+原生技术
此类技术最著名的便是React Native（简称RN），RN是Facebook于2015年4月发布的开源跨平台移动应用开发框架，其为早先开源的Web框架React在移动端的尝试，目前支持Android
和iOS，目前版本为0.67.4。RN使用JSX（JavaScript XML）语法（JSX是一个看起来很像XML的JavaScript语法扩展），主要用于在React组件内部构建
标签的类XML语法。因此，原先熟悉Web前端开发的技术人员，基本可以做到无缝切换。
由于RN是React的衍生品，所以其原理和React相同，React创造性地提出了虚拟DOM和响应式编程，对于整个技术圈产生了极大的影响。DOM（Document Object Model），
即文档对象模型，与UI页面的控件树相映射，用来描述页面的各个控件。RN通过内部的JavaScriptCore框架，将虚拟DOM树映射为原生控件，通过JS代码直接操作原生控件。
响应式编程，是React的重要思想，即UI随状态值的改变而自动改变，开发者只需要关注状态值的变化，UI的改变交给React，当状态变化时，React会结合最新的状态，
通过Diff算法，计算虚拟DOM中需要变化的部分，只操作这部分DOM，从而避免重新渲染整个页面，提高页面性能。由于RN映射的是原生控件，所以性能和UI效果上
会比Hybrid这类技术提升很多，但是由于渲染时需要通过JavaScriptCore和原生交互，所以在一些场景如触摸滑动可能会因为频繁通信导致卡顿，并且由于JavaScript
是运行时编译语言，所以在性能上和编译类语言仍有差距，同时由于渲染依赖原生控件，当系统更新时，很有可能出现不可预知的问题。

自绘引擎技术
此类技术的思路是通过在不同平台实现一个统一接口的渲染引擎（OpenGL，Skia），从而不依赖系统原生控件，也不再需要根据不同平台来单独维护组件库，几乎可以实现跨端一致性的问题，
并且由于是自绘引擎，所以和原生控件性能几乎一致。
在早期，Qt就发布了移动端框架，但是由于Qt使用C++作为开发语言，C++需要开发者手动管理内存分配，没有JavaScript或Java的垃圾回收机制，十分容易发生内存泄漏的问题，
所以一般情况下并不适合进行UI开发，同时由于C++语言缺少灵活性，社区活跃度低，相应的UI组件数量也较少，十分影响开发效率，所以随着时代发展，并没有得到发扬光大。
Flutter是Google于2017年5月正式发布的跨平台UI框架，旨在帮助开发者通过一套代码库高效构建多平台精美应用。目前版本为2.10，在最新的稳定版本中，
支持Android、iOS、Web、Windows桌面端，未来还将支持Mac桌面端，嵌入式端和Google新操作系统Fuchsia。Flutter与Qt相同，都是通过自绘引擎搭配原生插件的UI框架，
Flutter使用Skia作为其2D渲染引擎，Skia是一款用C++开发的、高性能2D图形绘制引擎，包含字型、坐标转换，以及点阵图都有高效能且简洁的表现，并且Skia是跨平台的，
目前已使用与Chrome浏览器和Android系统，所以在Android系统中可直接使用Skia，无需在App层内嵌Skia引擎，可以减小Apk包的体积。在开发语言上，选择使用的是Dart语言，
在Dart2中，Google针对客户端开发进行完善，同时支持强弱类型，大大提升了灵活性，UI框架的思想上受到React的启发，支持响应式编程，适应当前UI前端开发潮流，大大降低了开发难度。
Flutter发布至今已有5年多时间，在Google官方的不断维护下，Flutter性能不断加强，目前已和原生无明显差距，在Google的背书和宣传下，不断有新的开发者学习使用Flutter，
使得社区日益蓬勃活跃，在国内外有着非常多基于Flutter的成功案例，如阿里巴巴旗下的闲鱼，腾讯旗下的NOW直播，贝壳找房App等等。

Dart语言概览

Dart是由Google于2011年10月10日发布的一种面向对象的、类定义的、单继承的高性能语言。早期用于构建Web网页，随着发展，Google于2018年2月，
发布Dart2，使之成为强类型语言，目前Dart可用于Web、服务器、移动应用和物联网等领域的开发。
Dart语言的特性
1、提供AOT(Ahead Of Time)编译器，可编译成快速、可预测的本地代码，经过AOT编译的应用程序将稳定快速地启动
2、提供JIT(Just In Time)编译器，编译器拥有增量重编译功能 (支持热重载)、运行数据收集 (用于驱动 DevTools) 以及丰富的开发调试支持。
3、针对客户优化的语言，可在任何平台上开发快速的应用程序
4、高性能，Dart可以更轻松地创建以60fps运行的流畅动画和转场。
5、强类型语言，使用静态类型检查来确保变量的值 始终 与变量的静态类型相匹配，同时支持使用 dynamic 类型与运行时检查

响应式编程介绍

目前的Android和iOS应用开发，包括早期的Web网页开发，通常使用的是命令式UI,这种风格的操作方式是当UI发生变化时，调用相应的UI方法修改属性。
当UI状态增多，业务变得复杂时，命令式UI将会导致方法分散在各处代码中，使代码变得难以维护。为了减轻开发人员的负担，Flutter的UI框架是通过开发
人员描述当前的UI状态，无需编写如何在不同的UI状态之间进行切换的代码，通过修改状态值，将转换交给框架实现。


APP的UI搭建和功能架构
这是一款为移动开发者打造的App，UI上采用了Material Design设计，明亮的颜色，简约的布局设计，方便用户查看文章和资讯。数据的来源主要来自玩安卓、掘金、知乎等网站的抓包，
App主要分为首页、资讯、实例、我的、登录页面，功能整体架构图如下：
【App架构图】

技术难点
1、Getx、bloc框架实现状态管理，和状态管理框架的分析
2、dio框架进行网络请求
3、sqlite数据库
4、与原生交互

App整体页面布局设计上，采用了目前主流的设计功能区+底部栏设计，这种设计简洁明了，用户上手使用也较为习惯。在Flutter中对应的控件为IndexedStack和BottomNavigationBar，
通过底部的BottomNavigationBarItem的点击，切换为不同的IndexedStack。
【主页图】
【核心代码】

首页模块使用了TabBar和TabBarView的联动布局搭建，通过TabBar的点击切换TabBarView，同时支持TabBarView左右滑动切换TabBar。由于目前手机尺寸都较大，单手操作时往往无法
点击到顶部Tab，左右滑动便十分方便快捷，同时搜索控件位于右下角，方便用户点击进入搜索页。首页的主要功能如下：
1、推荐模块，由广告轮播图和推荐文章列表组成，支持下拉刷新和上拉加载更多，点击轮播图或文章列表跳转网页，查看具体文章内容，可对文章进行收藏。
【推荐图】
2、文章模块，由文章类型Tab和文章列表组成，用户可点击类型Tab进行刷新，获取对应类型的文章列表，同样支持下拉刷新，上拉加载和收藏。
【文章图】
3、公众号模块，使用GridView网格布局排列所有公众号信息，点击进入可查看此公众号的具体文章
【公众号图】
4、导航模块，由不同类型的开发者工具网站组成，使用可折叠列表排列，可点击展开列表，跳转具体网站
【导航图】
5、项目模块，使用TabBar，TabBarView和PageView组成，使用TabBar和TabBarView组合搭建页面，可左右切换项目类型，在不同的项目展示不同的项目内容，由于项目列表中包含项目图片，
需要更多的展示空间，所以使用PageView撑满整个屏幕，并支持上下切换列表项。
【项目图】

资讯模块和首页模块相同，同样使用了TabBar和TabBarView的搭建，主要分为视频、推荐和热榜三大功能。视频模块使用PageView搭建，支持上下切换，同时进行主题切换，切换为黑色主题，
给用户沉浸式体验。推荐模块和热榜模块相同，都是使用列表控件搭建，点击后进入资讯详情页，其中列表数据来源于知乎，其返回的并非网页地址，而是网页标签内容。面对这种网页标签，
需要对标签内容进行解析，手动拼凑成完整的网页数据，使用WebView加载。




